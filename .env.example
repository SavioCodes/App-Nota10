# ============================================
# Nota10 - Environment Variables Example
# ============================================
# Copy this file to .env and fill the values.
# Do NOT commit real secrets.

# ============================================
# BACKEND (Express + tRPC + Drizzle)
# ============================================

# REQUIRED (dev/prod): MySQL/TiDB connection string
# Used by: server/db.ts, drizzle.config.ts
DATABASE_URL=mysql://user:password@127.0.0.1:3306/nota10

# REQUIRED (dev/prod): JWT signing secret for app_session_id cookie/token
# Used by: server/_core/sdk.ts
JWT_SECRET=replace-with-a-long-random-secret

# REQUIRED (dev/prod): OAuth app/project id sent to OAuth server
# Used by: server/_core/env.ts, server/_core/sdk.ts
VITE_APP_ID=your_oauth_app_id

# REQUIRED (dev/prod): OAuth backend base URL
# Used by: server/_core/sdk.ts
OAUTH_SERVER_URL=https://oauth.example.com

# OPTIONAL: Owner openId for admin role bootstrap
# Used by: server/db.ts
OWNER_OPEN_ID=owner_open_id_here

# OPTIONAL: Owner display name (mainly mapped to EXPO_PUBLIC_OWNER_NAME)
OWNER_NAME=Owner Name

# REQUIRED for upload/storage features: Forge storage proxy base URL
# Used by: server/storage.ts, server/_core/dataApi.ts, server/_core/imageGeneration.ts, server/_core/voiceTranscription.ts
BUILT_IN_FORGE_API_URL=https://forge.example.com/

# REQUIRED for upload/storage features: Forge storage proxy API key
# Used by: same modules as BUILT_IN_FORGE_API_URL
BUILT_IN_FORGE_API_KEY=forge_api_key_here

# REQUIRED for OCR + artifact generation:
# If empty, backend falls back to BUILT_IN_FORGE_API_KEY in server/_core/env.ts
GEMINI_API_KEY=your_gemini_api_key

# OPTIONAL: Fast model (cost/speed)
GEMINI_FAST_MODEL=gemini-3-flash-preview

# OPTIONAL: Strict model (quality gate)
GEMINI_STRICT_MODEL=gemini-3-pro-preview

# OPTIONAL: low|medium|high
GEMINI_THINKING_LEVEL_FAST=medium

# OPTIONAL: low|medium|high
GEMINI_THINKING_LEVEL_STRICT=high

# OPTIONAL: upload size limit in MB (default: 15)
MAX_UPLOAD_MB=15

# OPTIONAL: max pages sent to OCR when PDF has poor native text (default: 30)
MAX_PDF_PAGES_OCR=30

# OPTIONAL: webhook bearer token for RevenueCat endpoint security
# Used by: server/_core/revenuecat.ts
REVENUECAT_WEBHOOK_SECRET=replace-with-random-webhook-secret

# OPTIONAL: allowed drift window for RevenueCat `event_timestamp_ms` (default: 86400)
# Used by: server/_core/revenuecat.ts
REVENUECAT_WEBHOOK_TOLERANCE_SECONDS=86400

# REQUIRED in production when frontend/backend are in different origins.
# Comma-separated allowlist (no spaces). Example:
# CORS_ALLOWED_ORIGINS=https://app.nota10.com,https://admin.nota10.com
# Used by: server/_core/index.ts
CORS_ALLOWED_ORIGINS=http://localhost:8081,http://127.0.0.1:8081

# OPTIONAL: rate-limit knobs (defaults shown below)
# Used by: server/_core/rate-limit.ts, server/routers.ts, server/_core/revenuecat.ts
RATE_LIMIT_REVENUECAT_MAX=120
RATE_LIMIT_REVENUECAT_WINDOW_MS=60000
RATE_LIMIT_UPLOAD_MAX=8
RATE_LIMIT_UPLOAD_WINDOW_MS=60000
RATE_LIMIT_ARTIFACTS_MAX=20
RATE_LIMIT_ARTIFACTS_WINDOW_MS=60000

# OPTIONAL: server port (default: 3000)
PORT=3000

# OPTIONAL: affects production checks/cookie behavior
NODE_ENV=development

# OPTIONAL: web callback redirect targets after OAuth callback
EXPO_WEB_PREVIEW_URL=http://localhost:8081
EXPO_PACKAGER_PROXY_URL=http://localhost:8081


# ============================================
# FRONTEND (Expo public env vars)
# ============================================
# Values below are embedded in client bundle (public).
# Do not put private secrets in EXPO_PUBLIC_*.

# REQUIRED for OAuth login URL build
EXPO_PUBLIC_APP_ID=your_oauth_app_id
EXPO_PUBLIC_OAUTH_PORTAL_URL=https://portal.example.com

# OPTIONAL currently in app code (exported constant, not actively consumed by login flow)
EXPO_PUBLIC_OAUTH_SERVER_URL=https://oauth.example.com

# REQUIRED for API calls on native; optional on web if hostname auto-derivation works
EXPO_PUBLIC_API_BASE_URL=http://localhost:3000

# OPTIONAL metadata
EXPO_PUBLIC_OWNER_OPEN_ID=owner_open_id_here
EXPO_PUBLIC_OWNER_NAME=Owner Name

# REQUIRED for in-app purchase on iOS/Android only
EXPO_PUBLIC_REVENUECAT_IOS_API_KEY=appl_xxxxxxxxxxxxxxxxxxxx
EXPO_PUBLIC_REVENUECAT_ANDROID_API_KEY=goog_xxxxxxxxxxxxxxxxxxxx


# ============================================
# OPTIONAL MAPPINGS USED BY scripts/load-env.js
# ============================================
# If these are set and EXPO_PUBLIC_* equivalents are missing,
# scripts/load-env.js will map them automatically.

VITE_OAUTH_PORTAL_URL=https://portal.example.com
REVENUECAT_IOS_API_KEY=appl_xxxxxxxxxxxxxxxxxxxx
REVENUECAT_ANDROID_API_KEY=goog_xxxxxxxxxxxxxxxxxxxx
