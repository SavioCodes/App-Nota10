# ============================================
# Nota10 - Environment Variables Example
# ============================================
# Copy this file to .env and fill the values.
# Do NOT commit real secrets.

# ============================================
# CORE APP FLAGS
# ============================================
NODE_ENV=development
PORT=3000
APP_LOG_LEVEL=debug
SERVER_LOG_LEVEL=debug

# Feature flags (rollout)
AUTH_SUPABASE_ENABLED=true
DB_DUAL_WRITE=true
DB_READ_POSTGRES=true
BILLING_MERCADOPAGO_WEB_ENABLED=true
BILLING_NATIVE_IAP_ENABLED=true

# ============================================
# DATABASE (Supabase Postgres)
# ============================================
# Pooler URL for runtime
DATABASE_URL=postgres://postgres:<password>@aws-1-sa-east-1.pooler.supabase.com:6543/postgres?sslmode=require
# Direct URL for migrations
DIRECT_DATABASE_URL=postgres://postgres:<password>@db.<project-ref>.supabase.co:5432/postgres?sslmode=require

# ============================================
# SUPABASE
# ============================================
SUPABASE_URL=https://<project-ref>.supabase.co
SUPABASE_PUBLISHABLE_KEY=sb_publishable_xxx
SUPABASE_SERVICE_ROLE_KEY=sb_secret_xxx
SUPABASE_STORAGE_BUCKET=documents

# Frontend public Supabase vars
EXPO_PUBLIC_SUPABASE_URL=https://<project-ref>.supabase.co
EXPO_PUBLIC_SUPABASE_PUBLISHABLE_KEY=sb_publishable_xxx
EXPO_PUBLIC_AUTH_SUPABASE_ENABLED=true

# ============================================
# AUTH / APP IDENTITY
# ============================================
# Legacy OAuth (keep during migration)
VITE_APP_ID=your_oauth_app_id
OAUTH_SERVER_URL=https://oauth.example.com
EXPO_PUBLIC_OAUTH_PORTAL_URL=https://portal.example.com
EXPO_PUBLIC_OAUTH_SERVER_URL=https://oauth.example.com

# Session/cookie secret (still used by legacy session flow)
JWT_SECRET=replace-with-a-long-random-secret

# Optional owner bootstrap
OWNER_OPEN_ID=owner_open_id_here
OWNER_NAME=Owner Name
EXPO_PUBLIC_OWNER_OPEN_ID=owner_open_id_here
EXPO_PUBLIC_OWNER_NAME=Owner Name

# API base for frontend
EXPO_PUBLIC_API_BASE_URL=http://localhost:3000

# App deep links / package ids
APP_BUNDLE_ID=com.example.nota10
APP_SCHEME=nota10
EXPO_PUBLIC_DEEP_LINK_SCHEME=nota10
EXPO_PUBLIC_PRIVACY_POLICY_URL="https://github.com/SavioCodes/App-Nota10/blob/main/docs/PRIVACY.md"

# CORS allowlist for backend
CORS_ALLOWED_ORIGINS=http://localhost:8081,http://127.0.0.1:8081

# ============================================
# STORAGE LEGACY (optional fallback)
# ============================================
BUILT_IN_FORGE_API_URL=https://forge.example.com/
BUILT_IN_FORGE_API_KEY=forge_api_key_here

# ============================================
# AI / EXTRACTION
# ============================================
GEMINI_API_KEY=your_gemini_api_key
GEMINI_FAST_MODEL=gemini-3-flash-preview
GEMINI_STRICT_MODEL=gemini-3-pro-preview
GEMINI_THINKING_LEVEL_FAST=medium
GEMINI_THINKING_LEVEL_STRICT=high
MAX_UPLOAD_MB=15
EXPO_PUBLIC_MAX_UPLOAD_MB=15
MAX_PDF_PAGES_OCR=30

# ============================================
# BILLING - MERCADO PAGO
# ============================================
MERCADOPAGO_ACCESS_TOKEN=APP_USR-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
MERCADOPAGO_PUBLIC_KEY=APP_USR-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
MERCADOPAGO_WEBHOOK_SECRET=replace-with-random-string
MERCADOPAGO_WEBHOOK_URL=https://api.nota10.com/api/billing/webhook/mercadopago
MERCADOPAGO_STATEMENT_DESCRIPTOR=NOTA10
EXPO_PUBLIC_MERCADOPAGO_RETURN_URL=nota10://paywall

# Optional custom catalog JSON (backend source of truth)
# BILLING_CATALOG_JSON=[{"id":"pro","displayName":"Pro","monthlyPriceCents":2990,"currency":"BRL","webProductId":"nota10_pro_monthly","iosProductId":"nota10_pro_monthly","androidProductId":"nota10_pro_monthly","enabled":true}]

# ============================================
# BILLING - MOBILE SERVER VERIFICATION
# ============================================
APPLE_ISSUER_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
APPLE_KEY_ID=XXXXXXXXXX
APPLE_PRIVATE_KEY_BASE64=<base64-p8-content>
APPLE_BUNDLE_ID=com.example.nota10

GOOGLE_PLAY_PACKAGE_NAME=com.example.nota10
GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64=<base64-service-account-json>

# ============================================
# RATE LIMITS
# ============================================
RATE_LIMIT_UPLOAD_MAX=8
RATE_LIMIT_UPLOAD_WINDOW_MS=60000
RATE_LIMIT_ARTIFACTS_MAX=20
RATE_LIMIT_ARTIFACTS_WINDOW_MS=60000

# ============================================
# WEB CALLBACK TARGETS (legacy OAuth)
# ============================================
EXPO_WEB_PREVIEW_URL=http://localhost:8081
EXPO_PACKAGER_PROXY_URL=http://localhost:8081
